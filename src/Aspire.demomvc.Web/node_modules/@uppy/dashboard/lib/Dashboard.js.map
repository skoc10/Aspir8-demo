{"version":3,"names":["UIPlugin","StatusBar","Informer","ThumbnailGenerator","findAllDOMElements","toArray","getDroppedFiles","defaultPickerIcon","nanoid","memoizeOne","trapFocus","createSuperFocus","DashboardUI","packageJson","locale","memoize","default","TAB_KEY","ESC_KEY","createPromise","o","promise","Promise","resolve","reject","defaultOptions","target","metaFields","inline","width","height","thumbnailWidth","thumbnailType","waitForThumbnailsBeforeUpload","showLinkToFileUploadResult","showProgressDetails","hideUploadButton","hideCancelButton","hideRetryButton","hidePauseResumeButton","hideProgressAfterFinish","note","closeModalOnClickOutside","closeAfterFinish","singleFileFullScreen","disableStatusBar","disableInformer","disableThumbnailGenerator","disablePageScrollWhenModalOpen","animateOpenClose","fileManagerSelectionType","proudlyDisplayPoweredByUppy","showSelectedFiles","showRemoveButtonAfterComplete","browserBackButtonClose","showNativePhotoCameraButton","showNativeVideoCameraButton","theme","autoOpen","autoOpenFileEditor","disabled","disableLocalFiles","doneButtonHandler","onRequestCloseModal","_disabledNodes","_classPrivateFieldLooseKey","_generateLargeThumbnailIfSingleFile","_openFileEditorWhenFilesAdded","_attachRenderFunctionToTarget","_isTargetSupported","_getAcquirers","_getProgressIndicators","_getEditors","_addSpecifiedPluginsFromOptions","_autoDiscoverPlugins","_addSupportedPluginIfNoTarget","Dashboard","constructor","uppy","opts","_this$opts4","_this$opts4$doneButto","_this$opts5","_this$opts5$onRequest","undefined","Object","defineProperty","writable","value","modalName","superFocus","ifFocusedOnUppyRecently","removeTarget","plugin","pluginState","getPluginState","newTargets","targets","filter","id","setPluginState","addTarget","callerPluginId","name","callerPluginName","title","callerPluginType","type","msg","log","state","slice","push","el","hideAllPanels","_state$activePickerPa","update","activePickerPanel","showAddFilesPanel","activeOverlayType","fileCardFor","showFileEditor","emit","showPanel","find","canEditFile","file","editors","_classPrivateFieldLooseBase","some","getPlugin","openFileEditor","forEach","editor","selectFile","closeFileEditor","isMetaEditorEnabled","length","saveFileEditor","save","openModal","savedScrollPosition","window","pageYOffset","savedActiveElement","document","activeElement","body","classList","add","isClosing","handler","isHidden","removeEventListener","addEventListener","updateBrowserHistory","handleKeyDownInModal","closeModal","_opts$manualClose","manualClose","remove","cancel","focus","_history$state","history","back","isModalOpen","requestCloseModal","setDarkModeCapability","isDarkModeOn","capabilities","getState","setState","darkMode","handleSystemDarkModeChange","event","isDarkModeOnNow","matches","toggleFileCard","show","fileID","getFile","toggleAddFilesPanel","addFiles","files","descriptors","map","source","data","meta","relativePath","webkitRelativePath","err","startListeningToResize","resizeObserver","ResizeObserver","entries","uppyDashboardInnerEl","contentRect","containerWidth","containerHeight","areInsidesReadyToBeVisible","observe","querySelector","makeDashboardInsidesVisibleAnywayTimeout","setTimeout","isModalAndClosed","stopListeningToResize","disconnect","clearTimeout","recordIfFocusedOnUppyRecently","contains","disableInteractiveElements","disable","_classPrivateFieldLoo","NODES_TO_DISABLE","nodesToDisable","querySelectorAll","node","tagName","setAttribute","dashboardIsDisabled","_history$state2","pushState","handlePopState","_event$state","keyCode","forModal","handleClickOutside","handlePaste","iteratePlugins","handleRootPaste","clipboardData","handleInputChange","preventDefault","handleDragOver","_this$opts$onDragOver","_this$opts","stopPropagation","canSomePluginHandleRootDrop","somePluginCanHandleRootDrop","canHandleRootDrop","doesEventHaveFiles","types","dataTransfer","hasFiles","allowNewUpload","dropEffect","removeDragOverClassTimeout","isDraggingOver","onDragOver","call","handleDragLeave","_this$opts$onDragLeav","_this$opts2","onDragLeave","handleDrop","_this$opts$onDrop","_this$opts3","handleRootDrop","executedDropErrorOnce","logDropError","error","info","message","onDrop","handleRequestThumbnail","handleCancelThumbnail","handleKeyDownInInline","forInline","handlePasteOnBody","isFocusInOverlay","handleComplete","_ref","failed","handleCancelRestore","LARGE_THUMBNAIL","getFiles","thumbnailGenerator","setOptions","fileForThumbnail","preview","requestThumbnail","then","firstFile","isImageEditorEnabled","initEvents","trigger","showModalTrigger","on","removeEvents","off","superFocusOnEachUpdate","isFocusInUppy","isFocusNowhere","isInformerHidden","isModal","afterUpdate","saveFileCard","setFileMeta","icon","render","isSupported","newFiles","uploadStartedFiles","completeFiles","erroredFiles","inProgressFiles","inProgressNotPausedFiles","processingFiles","isUploadStarted","isAllComplete","isAllErrored","isAllPaused","getObjectOfFilesPerState","acquirers","progressindicators","indexOf","console","warn","totalFileCount","keys","totalProgress","direction","autoProceed","i18n","i18nArray","recoveredState","resumableUploads","individualCancellation","isMobileDevice","isTargetDOMEl","parentElement","allowedFileTypes","restrictions","maxNumberOfFiles","requiredMetaFields","nativeCameraFacingMode","plugins","pluginID","mount","_plugin$opts","typesAllowed","includes","pluginAlreadyAdded","installedPlugin","install","Error","allowMultipleUploads","allowMultipleUploadBatches","use","hideAfterFinish","thumbnailHeight","lazy","darkModeMediaQuery","matchMedia","isDarkModeOnFromTheStart","_this$darkModeMediaQu","addListener","uninstall","informer","removePlugin","statusBar","thumbnail","unmount","_this$darkModeMediaQu2","removeListener","defaultLocale","clearUploadedFiles","i18nInit","VERSION","version"],"sources":["Dashboard.tsx"],"sourcesContent":["import {\n  UIPlugin,\n  type UIPluginOptions,\n  type UnknownPlugin,\n  type Uppy,\n  type UploadResult,\n  type State,\n} from '@uppy/core'\nimport type { ComponentChild, VNode } from 'preact'\nimport type { DefinePluginOpts } from '@uppy/core/lib/BasePlugin'\nimport type { Body, Meta, UppyFile } from '@uppy/utils/lib/UppyFile'\nimport StatusBar from '@uppy/status-bar'\nimport Informer from '@uppy/informer'\nimport ThumbnailGenerator from '@uppy/thumbnail-generator'\nimport findAllDOMElements from '@uppy/utils/lib/findAllDOMElements'\nimport toArray from '@uppy/utils/lib/toArray'\nimport getDroppedFiles from '@uppy/utils/lib/getDroppedFiles'\nimport { defaultPickerIcon } from '@uppy/provider-views'\n\nimport { nanoid } from 'nanoid/non-secure'\nimport memoizeOne from 'memoize-one'\nimport * as trapFocus from './utils/trapFocus.ts'\nimport createSuperFocus from './utils/createSuperFocus.ts'\nimport DashboardUI from './components/Dashboard.tsx'\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore We don't want TS to generate types for the package.json\nimport packageJson from '../package.json'\nimport locale from './locale.ts'\n\ntype GenericEventCallback = () => void\nexport type DashboardFileEditStartCallback<M extends Meta, B extends Body> = (\n  file?: UppyFile<M, B>,\n) => void\nexport type DashboardFileEditCompleteCallback<\n  M extends Meta,\n  B extends Body,\n> = (file?: UppyFile<M, B>) => void\nexport type DashboardShowPlanelCallback = (id: string) => void\ndeclare module '@uppy/core' {\n  export interface UppyEventMap<M extends Meta, B extends Body> {\n    'dashboard:modal-open': GenericEventCallback\n    'dashboard:modal-closed': GenericEventCallback\n    'dashboard:show-panel': DashboardShowPlanelCallback\n    'dashboard:file-edit-start': DashboardFileEditStartCallback<M, B>\n    'dashboard:file-edit-complete': DashboardFileEditCompleteCallback<M, B>\n    'dashboard:close-panel': (id: string | undefined) => void\n    'restore-canceled': GenericEventCallback\n  }\n}\n\ninterface PromiseWithResolvers<T> {\n  promise: Promise<T>\n  resolve: (value: T | PromiseLike<T>) => void\n  reject: (reason?: any) => void\n}\n\nconst memoize = ((memoizeOne as any).default as false) || memoizeOne\n\nconst TAB_KEY = 9\nconst ESC_KEY = 27\n\nfunction createPromise<T>(): PromiseWithResolvers<T> {\n  const o = {} as PromiseWithResolvers<T>\n  o.promise = new Promise<T>((resolve, reject) => {\n    o.resolve = resolve\n    o.reject = reject\n  })\n  return o\n}\n\ntype FieldRenderOptions = {\n  value: string\n  onChange: (newVal: string) => void\n  fieldCSSClasses: { text: string }\n  required: boolean\n  form: string\n}\n\ntype PreactRender = (\n  node: any,\n  params: Record<string, unknown> | null,\n  ...children: any[]\n) => VNode<any>\n\ninterface MetaField {\n  id: string\n  name: string\n  placeholder?: string\n  render?: (field: FieldRenderOptions, h: PreactRender) => VNode<any>\n}\n\ninterface Target {\n  id: string\n  name: string\n  type: string\n}\n\ninterface TargetWithRender extends Target {\n  icon: ComponentChild\n  render: () => ComponentChild\n}\n\ninterface DashboardState<M extends Meta, B extends Body> {\n  targets: Target[]\n  activePickerPanel: Target | undefined\n  showAddFilesPanel: boolean\n  activeOverlayType: string | null\n  fileCardFor: string | null\n  showFileEditor: boolean\n  metaFields?: MetaField[] | ((file: UppyFile<M, B>) => MetaField[])\n  [key: string]: unknown\n}\n\nexport interface DashboardModalOptions {\n  inline?: false\n  animateOpenClose?: boolean\n  browserBackButtonClose?: boolean\n  closeAfterFinish?: boolean\n  closeModalOnClickOutside?: boolean\n  disablePageScrollWhenModalOpen?: boolean\n}\n\nexport interface DashboardInlineOptions {\n  inline: true\n\n  height?: string | number\n  width?: string | number\n}\n\ninterface DashboardMiscOptions<M extends Meta, B extends Body>\n  extends UIPluginOptions {\n  autoOpen?: 'metaEditor' | 'imageEditor' | null\n  /** @deprecated use option autoOpen instead */\n  autoOpenFileEditor?: boolean\n  defaultPickerIcon?: typeof defaultPickerIcon\n  disabled?: boolean\n  disableInformer?: boolean\n  disableLocalFiles?: boolean\n  disableStatusBar?: boolean\n  disableThumbnailGenerator?: boolean\n  doneButtonHandler?: () => void\n  fileManagerSelectionType?: 'files' | 'folders' | 'both'\n  hideCancelButton?: boolean\n  hidePauseResumeButton?: boolean\n  hideProgressAfterFinish?: boolean\n  hideRetryButton?: boolean\n  hideUploadButton?: boolean\n  metaFields?: MetaField[] | ((file: UppyFile<M, B>) => MetaField[])\n  nativeCameraFacingMode?: ConstrainDOMString\n  note?: string | null\n  onDragLeave?: (event: DragEvent) => void\n  onDragOver?: (event: DragEvent) => void\n  onDrop?: (event: DragEvent) => void\n  onRequestCloseModal?: () => void\n  plugins?: string[]\n  proudlyDisplayPoweredByUppy?: boolean\n  showLinkToFileUploadResult?: boolean\n  showNativePhotoCameraButton?: boolean\n  showNativeVideoCameraButton?: boolean\n  showProgressDetails?: boolean\n  showRemoveButtonAfterComplete?: boolean\n  showSelectedFiles?: boolean\n  singleFileFullScreen?: boolean\n  theme?: 'auto' | 'dark' | 'light'\n  thumbnailHeight?: number\n  thumbnailType?: string\n  thumbnailWidth?: number\n  trigger?: string | Element\n  waitForThumbnailsBeforeUpload?: boolean\n}\n\nexport type DashboardOptions<\n  M extends Meta,\n  B extends Body,\n> = DashboardMiscOptions<M, B> &\n  (DashboardModalOptions | DashboardInlineOptions)\n\n// set default options, must be kept in sync with packages/@uppy/react/src/DashboardModal.js\nconst defaultOptions = {\n  target: 'body',\n  metaFields: [],\n  inline: false as boolean,\n  width: 750,\n  height: 550,\n  thumbnailWidth: 280,\n  thumbnailType: 'image/jpeg',\n  waitForThumbnailsBeforeUpload: false,\n  defaultPickerIcon,\n  showLinkToFileUploadResult: false,\n  showProgressDetails: false,\n  hideUploadButton: false,\n  hideCancelButton: false,\n  hideRetryButton: false,\n  hidePauseResumeButton: false,\n  hideProgressAfterFinish: false,\n  note: null,\n  closeModalOnClickOutside: false,\n  closeAfterFinish: false,\n  singleFileFullScreen: true,\n  disableStatusBar: false,\n  disableInformer: false,\n  disableThumbnailGenerator: false,\n  disablePageScrollWhenModalOpen: true,\n  animateOpenClose: true,\n  fileManagerSelectionType: 'files',\n  proudlyDisplayPoweredByUppy: true,\n  showSelectedFiles: true,\n  showRemoveButtonAfterComplete: false,\n  browserBackButtonClose: false,\n  showNativePhotoCameraButton: false,\n  showNativeVideoCameraButton: false,\n  theme: 'light',\n  autoOpen: null,\n  autoOpenFileEditor: false,\n  disabled: false,\n  disableLocalFiles: false,\n\n  // Dynamic default options, they have to be defined in the constructor (because\n  // they require access to the `this` keyword), but we still want them to\n  // appear in the default options so TS knows they'll be defined.\n  doneButtonHandler: null as any,\n  onRequestCloseModal: null as any,\n} satisfies Partial<DashboardOptions<any, any>>\n\n/**\n * Dashboard UI with previews, metadata editing, tabs for various services and more\n */\nexport default class Dashboard<M extends Meta, B extends Body> extends UIPlugin<\n  DefinePluginOpts<\n    // The options object inside the class is not the discriminated union but and intersection of the different subtypes.\n    DashboardMiscOptions<M, B> &\n      Omit<DashboardInlineOptions, 'inline'> &\n      Omit<DashboardModalOptions, 'inline'> & { inline?: boolean },\n    keyof typeof defaultOptions\n  >,\n  M,\n  B,\n  DashboardState<M, B>\n> {\n  static VERSION = packageJson.version\n\n  #disabledNodes!: HTMLElement[] | null\n\n  private modalName = `uppy-Dashboard-${nanoid()}`\n\n  private superFocus = createSuperFocus()\n\n  private ifFocusedOnUppyRecently = false\n\n  private dashboardIsDisabled!: boolean\n\n  private savedScrollPosition!: number\n\n  private savedActiveElement!: HTMLElement\n\n  private resizeObserver!: ResizeObserver\n\n  private darkModeMediaQuery!: MediaQueryList | null\n\n  // Timeouts\n  private makeDashboardInsidesVisibleAnywayTimeout!: ReturnType<\n    typeof setTimeout\n  >\n\n  private removeDragOverClassTimeout!: ReturnType<typeof setTimeout>\n\n  constructor(uppy: Uppy<M, B>, opts?: DashboardOptions<M, B>) {\n    // support for the legacy `autoOpenFileEditor` option,\n    // TODO: we can remove this code when we update the Uppy major version\n    let autoOpen: DashboardOptions<M, B>['autoOpen']\n    if (!opts) {\n      autoOpen = null\n    } else if (opts.autoOpen === undefined) {\n      autoOpen = opts.autoOpenFileEditor ? 'imageEditor' : null\n    } else {\n      autoOpen = opts.autoOpen\n    }\n    super(uppy, { ...defaultOptions, ...opts, autoOpen })\n    this.id = this.opts.id || 'Dashboard'\n    this.title = 'Dashboard'\n    this.type = 'orchestrator'\n\n    this.defaultLocale = locale\n\n    // Dynamic default options:\n    this.opts.doneButtonHandler ??= () => {\n      this.uppy.clearUploadedFiles()\n      this.requestCloseModal()\n    }\n    this.opts.onRequestCloseModal ??= () => this.closeModal()\n\n    this.i18nInit()\n  }\n\n  removeTarget = (plugin: UnknownPlugin<M, B>): void => {\n    const pluginState = this.getPluginState()\n    // filter out the one we want to remove\n    const newTargets = pluginState.targets.filter(\n      (target) => target.id !== plugin.id,\n    )\n\n    this.setPluginState({\n      targets: newTargets,\n    })\n  }\n\n  addTarget = (plugin: UnknownPlugin<M, B>): HTMLElement | null => {\n    const callerPluginId = plugin.id || plugin.constructor.name\n    const callerPluginName =\n      (plugin as any as { title: string }).title || callerPluginId\n    const callerPluginType = plugin.type\n\n    if (\n      callerPluginType !== 'acquirer' &&\n      callerPluginType !== 'progressindicator' &&\n      callerPluginType !== 'editor'\n    ) {\n      const msg =\n        'Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor'\n      this.uppy.log(msg, 'error')\n      return null\n    }\n\n    const target = {\n      id: callerPluginId,\n      name: callerPluginName,\n      type: callerPluginType,\n    }\n\n    const state = this.getPluginState()\n    const newTargets = state.targets.slice()\n    newTargets.push(target)\n\n    this.setPluginState({\n      targets: newTargets,\n    })\n\n    return this.el\n  }\n\n  hideAllPanels = (): void => {\n    const state = this.getPluginState()\n    const update = {\n      activePickerPanel: undefined,\n      showAddFilesPanel: false,\n      activeOverlayType: null,\n      fileCardFor: null,\n      showFileEditor: false,\n    }\n\n    if (\n      state.activePickerPanel === update.activePickerPanel &&\n      state.showAddFilesPanel === update.showAddFilesPanel &&\n      state.showFileEditor === update.showFileEditor &&\n      state.activeOverlayType === update.activeOverlayType\n    ) {\n      // avoid doing a state update if nothing changed\n      return\n    }\n\n    this.setPluginState(update)\n\n    this.uppy.emit('dashboard:close-panel', state.activePickerPanel?.id)\n  }\n\n  showPanel = (id: string): void => {\n    const { targets } = this.getPluginState()\n\n    const activePickerPanel = targets.find((target) => {\n      return target.type === 'acquirer' && target.id === id\n    })\n\n    this.setPluginState({\n      activePickerPanel,\n      activeOverlayType: 'PickerPanel',\n    })\n\n    this.uppy.emit('dashboard:show-panel', id)\n  }\n\n  private canEditFile = (file: UppyFile<M, B>): boolean => {\n    const { targets } = this.getPluginState()\n    const editors = this.#getEditors(targets)\n\n    return editors.some((target) =>\n      (this.uppy.getPlugin(target.id) as any).canEditFile(file),\n    )\n  }\n\n  openFileEditor = (file: UppyFile<M, B>): void => {\n    const { targets } = this.getPluginState()\n    const editors = this.#getEditors(targets)\n\n    this.setPluginState({\n      showFileEditor: true,\n      fileCardFor: file.id || null,\n      activeOverlayType: 'FileEditor',\n    })\n\n    editors.forEach((editor) => {\n      ;(this.uppy.getPlugin(editor.id) as any).selectFile(file)\n    })\n  }\n\n  closeFileEditor = (): void => {\n    const { metaFields } = this.getPluginState()\n    const isMetaEditorEnabled = metaFields && metaFields.length > 0\n\n    if (isMetaEditorEnabled) {\n      this.setPluginState({\n        showFileEditor: false,\n        activeOverlayType: 'FileCard',\n      })\n    } else {\n      this.setPluginState({\n        showFileEditor: false,\n        fileCardFor: null,\n        activeOverlayType: 'AddFiles',\n      })\n    }\n  }\n\n  saveFileEditor = (): void => {\n    const { targets } = this.getPluginState()\n    const editors = this.#getEditors(targets)\n\n    editors.forEach((editor) => {\n      ;(this.uppy.getPlugin(editor.id) as any).save()\n    })\n\n    this.closeFileEditor()\n  }\n\n  openModal = (): Promise<void> => {\n    const { promise, resolve } = createPromise<void>()\n    // save scroll position\n    this.savedScrollPosition = window.pageYOffset\n    // save active element, so we can restore focus when modal is closed\n    this.savedActiveElement = document.activeElement as HTMLElement\n\n    if (this.opts.disablePageScrollWhenModalOpen) {\n      document.body.classList.add('uppy-Dashboard-isFixed')\n    }\n\n    if (this.opts.animateOpenClose && this.getPluginState().isClosing) {\n      const handler = () => {\n        this.setPluginState({\n          isHidden: false,\n        })\n        this.el!.removeEventListener('animationend', handler, false)\n        resolve()\n      }\n      this.el!.addEventListener('animationend', handler, false)\n    } else {\n      this.setPluginState({\n        isHidden: false,\n      })\n      resolve()\n    }\n\n    if (this.opts.browserBackButtonClose) {\n      this.updateBrowserHistory()\n    }\n\n    // handle ESC and TAB keys in modal dialog\n    document.addEventListener('keydown', this.handleKeyDownInModal)\n\n    this.uppy.emit('dashboard:modal-open')\n\n    return promise\n  }\n\n  closeModal = (opts?: { manualClose: boolean }): void | Promise<void> => {\n    // Whether the modal is being closed by the user (`true`) or by other means (e.g. browser back button)\n    const manualClose = opts?.manualClose ?? true\n\n    const { isHidden, isClosing } = this.getPluginState()\n    if (isHidden || isClosing) {\n      // short-circuit if animation is ongoing\n      return undefined\n    }\n\n    const { promise, resolve } = createPromise<void>()\n\n    if (this.opts.disablePageScrollWhenModalOpen) {\n      document.body.classList.remove('uppy-Dashboard-isFixed')\n    }\n\n    if (this.opts.animateOpenClose) {\n      this.setPluginState({\n        isClosing: true,\n      })\n      const handler = () => {\n        this.setPluginState({\n          isHidden: true,\n          isClosing: false,\n        })\n\n        this.superFocus.cancel()\n        this.savedActiveElement.focus()\n\n        this.el!.removeEventListener('animationend', handler, false)\n        resolve()\n      }\n      this.el!.addEventListener('animationend', handler, false)\n    } else {\n      this.setPluginState({\n        isHidden: true,\n      })\n\n      this.superFocus.cancel()\n      this.savedActiveElement.focus()\n\n      resolve()\n    }\n\n    // handle ESC and TAB keys in modal dialog\n    document.removeEventListener('keydown', this.handleKeyDownInModal)\n\n    if (manualClose) {\n      if (this.opts.browserBackButtonClose) {\n        // Make sure that the latest entry in the history state is our modal name\n        // eslint-disable-next-line no-restricted-globals\n        if (history.state?.[this.modalName]) {\n          // Go back in history to clear out the entry we created (ultimately closing the modal)\n          // eslint-disable-next-line no-restricted-globals\n          history.back()\n        }\n      }\n    }\n\n    this.uppy.emit('dashboard:modal-closed')\n\n    return promise\n  }\n\n  isModalOpen = (): boolean => {\n    return !this.getPluginState().isHidden || false\n  }\n\n  private requestCloseModal = (): void | Promise<void> => {\n    if (this.opts.onRequestCloseModal) {\n      return this.opts.onRequestCloseModal()\n    }\n    return this.closeModal()\n  }\n\n  setDarkModeCapability = (isDarkModeOn: boolean): void => {\n    const { capabilities } = this.uppy.getState()\n    this.uppy.setState({\n      capabilities: {\n        ...capabilities,\n        darkMode: isDarkModeOn,\n      },\n    })\n  }\n\n  private handleSystemDarkModeChange = (event: MediaQueryListEvent) => {\n    const isDarkModeOnNow = event.matches\n    this.uppy.log(`[Dashboard] Dark mode is ${isDarkModeOnNow ? 'on' : 'off'}`)\n    this.setDarkModeCapability(isDarkModeOnNow)\n  }\n\n  private toggleFileCard = (show: boolean, fileID: string) => {\n    const file = this.uppy.getFile(fileID)\n    if (show) {\n      this.uppy.emit('dashboard:file-edit-start', file)\n    } else {\n      this.uppy.emit('dashboard:file-edit-complete', file)\n    }\n\n    this.setPluginState({\n      fileCardFor: show ? fileID : null,\n      activeOverlayType: show ? 'FileCard' : null,\n    })\n  }\n\n  private toggleAddFilesPanel = (show: boolean) => {\n    this.setPluginState({\n      showAddFilesPanel: show,\n      activeOverlayType: show ? 'AddFiles' : null,\n    })\n  }\n\n  addFiles = (files: File[]): void => {\n    const descriptors = files.map((file) => ({\n      source: this.id,\n      name: file.name,\n      type: file.type,\n      data: file,\n      meta: {\n        // path of the file relative to the ancestor directory the user selected.\n        // e.g. 'docs/Old Prague/airbnb.pdf'\n        relativePath:\n          (file as any).relativePath || file.webkitRelativePath || null,\n      } as any as M,\n    }))\n\n    try {\n      this.uppy.addFiles(descriptors)\n    } catch (err) {\n      this.uppy.log(err as any)\n    }\n  }\n\n  // ___Why make insides of Dashboard invisible until first ResizeObserver event is emitted?\n  //    ResizeOberserver doesn't emit the first resize event fast enough, users can see the jump from one .uppy-size-- to\n  //    another (e.g. in Safari)\n  // ___Why not apply visibility property to .uppy-Dashboard-inner?\n  //    Because ideally, acc to specs, ResizeObserver should see invisible elements as of width 0. So even though applying\n  //    invisibility to .uppy-Dashboard-inner works now, it may not work in the future.\n  private startListeningToResize = () => {\n    // Watch for Dashboard container (`.uppy-Dashboard-inner`) resize\n    // and update containerWidth/containerHeight in plugin state accordingly.\n    // Emits first event on initialization.\n    this.resizeObserver = new ResizeObserver((entries) => {\n      const uppyDashboardInnerEl = entries[0]\n      const { width, height } = uppyDashboardInnerEl.contentRect\n\n      this.setPluginState({\n        containerWidth: width,\n        containerHeight: height,\n        areInsidesReadyToBeVisible: true,\n      })\n    })\n    this.resizeObserver.observe(\n      this.el!.querySelector('.uppy-Dashboard-inner')!,\n    )\n\n    // If ResizeObserver fails to emit an event telling us what size to use - default to the mobile view\n    this.makeDashboardInsidesVisibleAnywayTimeout = setTimeout(() => {\n      const pluginState = this.getPluginState()\n      const isModalAndClosed = !this.opts.inline && pluginState.isHidden\n      if (\n        // We might want to enable this in the future\n\n        // if ResizeObserver hasn't yet fired,\n        !pluginState.areInsidesReadyToBeVisible &&\n        // and it's not due to the modal being closed\n        !isModalAndClosed\n      ) {\n        this.uppy.log(\n          '[Dashboard] resize event didn’t fire on time: defaulted to mobile layout',\n          'warning',\n        )\n\n        this.setPluginState({\n          areInsidesReadyToBeVisible: true,\n        })\n      }\n    }, 1000)\n  }\n\n  private stopListeningToResize = () => {\n    this.resizeObserver.disconnect()\n\n    clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)\n  }\n\n  // Records whether we have been interacting with uppy right now,\n  // which is then used to determine whether state updates should trigger a refocusing.\n  private recordIfFocusedOnUppyRecently = (event: Event) => {\n    if (this.el!.contains(event.target as HTMLElement)) {\n      this.ifFocusedOnUppyRecently = true\n    } else {\n      this.ifFocusedOnUppyRecently = false\n      // ___Why run this.superFocus.cancel here when it already runs in superFocusOnEachUpdate?\n      //    Because superFocus is debounced, when we move from Uppy to some other element on the page,\n      //    previously run superFocus sometimes hits and moves focus back to Uppy.\n      this.superFocus.cancel()\n    }\n  }\n\n  private disableInteractiveElements = (disable: boolean) => {\n    const NODES_TO_DISABLE = [\n      'a[href]',\n      'input:not([disabled])',\n      'select:not([disabled])',\n      'textarea:not([disabled])',\n      'button:not([disabled])',\n      '[role=\"button\"]:not([disabled])',\n    ]\n\n    const nodesToDisable =\n      this.#disabledNodes ??\n      toArray(this.el!.querySelectorAll(NODES_TO_DISABLE as any)).filter(\n        (node) => !node.classList.contains('uppy-Dashboard-close'),\n      )\n\n    for (const node of nodesToDisable) {\n      // Links can’t have `disabled` attr, so we use `aria-disabled` for a11y\n      if (node.tagName === 'A') {\n        node.setAttribute('aria-disabled', disable)\n      } else {\n        node.disabled = disable\n      }\n    }\n\n    if (disable) {\n      this.#disabledNodes = nodesToDisable\n    } else {\n      this.#disabledNodes = null\n    }\n\n    this.dashboardIsDisabled = disable\n  }\n\n  private updateBrowserHistory = () => {\n    // Ensure history state does not already contain our modal name to avoid double-pushing\n    // eslint-disable-next-line no-restricted-globals\n    if (!history.state?.[this.modalName]) {\n      // Push to history so that the page is not lost on browser back button press\n      // eslint-disable-next-line no-restricted-globals\n      history.pushState(\n        {\n          // eslint-disable-next-line no-restricted-globals\n          ...history.state,\n          [this.modalName]: true,\n        },\n        '',\n      )\n    }\n\n    // Listen for back button presses\n    window.addEventListener('popstate', this.handlePopState, false)\n  }\n\n  private handlePopState = (event: PopStateEvent) => {\n    // Close the modal if the history state no longer contains our modal name\n    if (this.isModalOpen() && (!event.state || !event.state[this.modalName])) {\n      this.closeModal({ manualClose: false })\n    }\n\n    // When the browser back button is pressed and uppy is now the latest entry\n    // in the history but the modal is closed, fix the history by removing the\n    // uppy history entry.\n    // This occurs when another entry is added into the history state while the\n    // modal is open, and then the modal gets manually closed.\n    // Solves PR #575 (https://github.com/transloadit/uppy/pull/575)\n    if (!this.isModalOpen() && event.state?.[this.modalName]) {\n      // eslint-disable-next-line no-restricted-globals\n      history.back()\n    }\n  }\n\n  private handleKeyDownInModal = (event: KeyboardEvent) => {\n    // close modal on esc key press\n    if (event.keyCode === ESC_KEY) this.requestCloseModal()\n    // trap focus on tab key press\n    if (event.keyCode === TAB_KEY)\n      trapFocus.forModal(\n        event,\n        this.getPluginState().activeOverlayType,\n        this.el,\n      )\n  }\n\n  private handleClickOutside = () => {\n    if (this.opts.closeModalOnClickOutside) this.requestCloseModal()\n  }\n\n  private handlePaste = (event: ClipboardEvent) => {\n    // Let any acquirer plugin (Url/Webcam/etc.) handle pastes to the root\n    this.uppy.iteratePlugins((plugin) => {\n      if (plugin.type === 'acquirer') {\n        // Every Plugin with .type acquirer can define handleRootPaste(event)\n        ;(plugin as any).handleRootPaste?.(event)\n      }\n    })\n\n    // Add all dropped files\n    const files = toArray(event.clipboardData!.files)\n    if (files.length > 0) {\n      this.uppy.log('[Dashboard] Files pasted')\n      this.addFiles(files)\n    }\n  }\n\n  private handleInputChange = (event: InputEvent) => {\n    event.preventDefault()\n    const files = toArray((event.target as HTMLInputElement).files!)\n    if (files.length > 0) {\n      this.uppy.log('[Dashboard] Files selected through input')\n      this.addFiles(files)\n    }\n  }\n\n  private handleDragOver = (event: DragEvent) => {\n    event.preventDefault()\n    event.stopPropagation()\n\n    // Check if some plugin can handle the datatransfer without files —\n    // for instance, the Url plugin can import a url\n    const canSomePluginHandleRootDrop = () => {\n      let somePluginCanHandleRootDrop = true\n      this.uppy.iteratePlugins((plugin) => {\n        if ((plugin as any).canHandleRootDrop?.(event)) {\n          somePluginCanHandleRootDrop = true\n        }\n      })\n      return somePluginCanHandleRootDrop\n    }\n\n    // Check if the \"type\" of the datatransfer object includes files\n    const doesEventHaveFiles = () => {\n      const { types } = event.dataTransfer!\n      return types.some((type) => type === 'Files')\n    }\n\n    // Deny drop, if no plugins can handle datatransfer, there are no files,\n    // or when opts.disabled is set, or new uploads are not allowed\n    const somePluginCanHandleRootDrop = canSomePluginHandleRootDrop()\n    const hasFiles = doesEventHaveFiles()\n    if (\n      (!somePluginCanHandleRootDrop && !hasFiles) ||\n      this.opts.disabled ||\n      // opts.disableLocalFiles should only be taken into account if no plugins\n      // can handle the datatransfer\n      (this.opts.disableLocalFiles &&\n        (hasFiles || !somePluginCanHandleRootDrop)) ||\n      !this.uppy.getState().allowNewUpload\n    ) {\n      event.dataTransfer!.dropEffect = 'none' // eslint-disable-line no-param-reassign\n      clearTimeout(this.removeDragOverClassTimeout)\n      return\n    }\n\n    // Add a small (+) icon on drop\n    // (and prevent browsers from interpreting this as files being _moved_ into the\n    // browser, https://github.com/transloadit/uppy/issues/1978).\n    event.dataTransfer!.dropEffect = 'copy' // eslint-disable-line no-param-reassign\n\n    clearTimeout(this.removeDragOverClassTimeout)\n    this.setPluginState({ isDraggingOver: true })\n\n    this.opts.onDragOver?.(event)\n  }\n\n  private handleDragLeave = (event: DragEvent) => {\n    event.preventDefault()\n    event.stopPropagation()\n\n    clearTimeout(this.removeDragOverClassTimeout)\n    // Timeout against flickering, this solution is taken from drag-drop library.\n    // Solution with 'pointer-events: none' didn't work across browsers.\n    this.removeDragOverClassTimeout = setTimeout(() => {\n      this.setPluginState({ isDraggingOver: false })\n    }, 50)\n\n    this.opts.onDragLeave?.(event)\n  }\n\n  private handleDrop = async (event: DragEvent) => {\n    event.preventDefault()\n    event.stopPropagation()\n\n    clearTimeout(this.removeDragOverClassTimeout)\n\n    this.setPluginState({ isDraggingOver: false })\n\n    // Let any acquirer plugin (Url/Webcam/etc.) handle drops to the root\n    this.uppy.iteratePlugins((plugin) => {\n      if (plugin.type === 'acquirer') {\n        // Every Plugin with .type acquirer can define handleRootDrop(event)\n        ;(plugin as any).handleRootDrop?.(event)\n      }\n    })\n\n    // Add all dropped files\n    let executedDropErrorOnce = false\n    const logDropError = (error: any) => {\n      this.uppy.log(error, 'error')\n\n      // In practice all drop errors are most likely the same,\n      // so let's just show one to avoid overwhelming the user\n      if (!executedDropErrorOnce) {\n        this.uppy.info(error.message, 'error')\n        executedDropErrorOnce = true\n      }\n    }\n\n    this.uppy.log('[Dashboard] Processing dropped files')\n\n    // Add all dropped files\n    const files = await getDroppedFiles(event.dataTransfer!, { logDropError })\n    if (files.length > 0) {\n      this.uppy.log('[Dashboard] Files dropped')\n      this.addFiles(files)\n    }\n\n    this.opts.onDrop?.(event)\n  }\n\n  private handleRequestThumbnail = (file: UppyFile<M, B>) => {\n    if (!this.opts.waitForThumbnailsBeforeUpload) {\n      this.uppy.emit('thumbnail:request', file)\n    }\n  }\n\n  /**\n   * We cancel thumbnail requests when a file item component unmounts to avoid\n   * clogging up the queue when the user scrolls past many elements.\n   */\n  private handleCancelThumbnail = (file: UppyFile<M, B>) => {\n    if (!this.opts.waitForThumbnailsBeforeUpload) {\n      this.uppy.emit('thumbnail:cancel', file)\n    }\n  }\n\n  private handleKeyDownInInline = (event: KeyboardEvent) => {\n    // Trap focus on tab key press.\n    if (event.keyCode === TAB_KEY)\n      trapFocus.forInline(\n        event,\n        this.getPluginState().activeOverlayType,\n        this.el,\n      )\n  }\n\n  // ___Why do we listen to the 'paste' event on a document instead of onPaste={props.handlePaste} prop,\n  //    or this.el.addEventListener('paste')?\n  //    Because (at least) Chrome doesn't handle paste if focus is on some button, e.g. 'My Device'.\n  //    => Therefore, the best option is to listen to all 'paste' events, and only react to them when we are focused on our\n  //       particular Uppy instance.\n  // ___Why do we still need onPaste={props.handlePaste} for the DashboardUi?\n  //    Because if we click on the 'Drop files here' caption e.g., `document.activeElement` will be 'body'. Which means our\n  //    standard determination of whether we're pasting into our Uppy instance won't work.\n  //    => Therefore, we need a traditional onPaste={props.handlePaste} handler too.\n  private handlePasteOnBody = (event: ClipboardEvent) => {\n    const isFocusInOverlay = this.el!.contains(document.activeElement)\n    if (isFocusInOverlay) {\n      this.handlePaste(event)\n    }\n  }\n\n  private handleComplete = ({ failed }: UploadResult<M, B>) => {\n    if (this.opts.closeAfterFinish && !failed?.length) {\n      // All uploads are done\n      this.requestCloseModal()\n    }\n  }\n\n  private handleCancelRestore = () => {\n    this.uppy.emit('restore-canceled')\n  }\n\n  #generateLargeThumbnailIfSingleFile = () => {\n    if (this.opts.disableThumbnailGenerator) {\n      return\n    }\n\n    const LARGE_THUMBNAIL = 600\n    const files = this.uppy.getFiles()\n\n    if (files.length === 1) {\n      const thumbnailGenerator = this.uppy.getPlugin(\n        `${this.id}:ThumbnailGenerator`,\n      ) as ThumbnailGenerator<M, B> | undefined\n      thumbnailGenerator?.setOptions({ thumbnailWidth: LARGE_THUMBNAIL })\n      const fileForThumbnail = { ...files[0], preview: undefined }\n      thumbnailGenerator?.requestThumbnail(fileForThumbnail).then(() => {\n        thumbnailGenerator?.setOptions({\n          thumbnailWidth: this.opts.thumbnailWidth,\n        })\n      })\n    }\n  }\n\n  #openFileEditorWhenFilesAdded = (files: UppyFile<M, B>[]) => {\n    const firstFile = files[0]\n\n    const { metaFields } = this.getPluginState()\n    const isMetaEditorEnabled = metaFields && metaFields.length > 0\n    const isImageEditorEnabled = this.canEditFile(firstFile)\n\n    if (isMetaEditorEnabled && this.opts.autoOpen === 'metaEditor') {\n      this.toggleFileCard(true, firstFile.id)\n    } else if (isImageEditorEnabled && this.opts.autoOpen === 'imageEditor') {\n      this.openFileEditor(firstFile)\n    }\n  }\n\n  initEvents = (): void => {\n    // Modal open button\n    if (this.opts.trigger && !this.opts.inline) {\n      const showModalTrigger = findAllDOMElements(this.opts.trigger)\n      if (showModalTrigger) {\n        showModalTrigger.forEach((trigger) =>\n          trigger.addEventListener('click', this.openModal),\n        )\n      } else {\n        this.uppy.log(\n          'Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself',\n          'warning',\n        )\n      }\n    }\n\n    this.startListeningToResize()\n    document.addEventListener('paste', this.handlePasteOnBody)\n\n    this.uppy.on('plugin-added', this.#addSupportedPluginIfNoTarget)\n    this.uppy.on('plugin-remove', this.removeTarget)\n    this.uppy.on('file-added', this.hideAllPanels)\n    this.uppy.on('dashboard:modal-closed', this.hideAllPanels)\n    this.uppy.on('complete', this.handleComplete)\n\n    this.uppy.on('files-added', this.#generateLargeThumbnailIfSingleFile)\n    this.uppy.on('file-removed', this.#generateLargeThumbnailIfSingleFile)\n\n    // ___Why fire on capture?\n    //    Because this.ifFocusedOnUppyRecently needs to change before onUpdate() fires.\n    document.addEventListener('focus', this.recordIfFocusedOnUppyRecently, true)\n    document.addEventListener('click', this.recordIfFocusedOnUppyRecently, true)\n\n    if (this.opts.inline) {\n      this.el!.addEventListener('keydown', this.handleKeyDownInInline)\n    }\n\n    if (this.opts.autoOpen) {\n      this.uppy.on('files-added', this.#openFileEditorWhenFilesAdded)\n    }\n  }\n\n  removeEvents = (): void => {\n    const showModalTrigger = findAllDOMElements(this.opts.trigger)\n    if (!this.opts.inline && showModalTrigger) {\n      showModalTrigger.forEach((trigger) =>\n        trigger.removeEventListener('click', this.openModal),\n      )\n    }\n\n    this.stopListeningToResize()\n    document.removeEventListener('paste', this.handlePasteOnBody)\n    window.removeEventListener('popstate', this.handlePopState, false)\n\n    this.uppy.off('plugin-added', this.#addSupportedPluginIfNoTarget)\n    this.uppy.off('plugin-remove', this.removeTarget)\n    this.uppy.off('file-added', this.hideAllPanels)\n    this.uppy.off('dashboard:modal-closed', this.hideAllPanels)\n    this.uppy.off('complete', this.handleComplete)\n\n    this.uppy.off('files-added', this.#generateLargeThumbnailIfSingleFile)\n    this.uppy.off('file-removed', this.#generateLargeThumbnailIfSingleFile)\n\n    document.removeEventListener('focus', this.recordIfFocusedOnUppyRecently)\n    document.removeEventListener('click', this.recordIfFocusedOnUppyRecently)\n\n    if (this.opts.inline) {\n      this.el!.removeEventListener('keydown', this.handleKeyDownInInline)\n    }\n\n    if (this.opts.autoOpen) {\n      this.uppy.off('files-added', this.#openFileEditorWhenFilesAdded)\n    }\n  }\n\n  private superFocusOnEachUpdate = () => {\n    const isFocusInUppy = this.el!.contains(document.activeElement)\n    // When focus is lost on the page (== focus is on body for most browsers, or focus is null for IE11)\n    const isFocusNowhere =\n      document.activeElement === document.body ||\n      document.activeElement === null\n    const isInformerHidden = this.uppy.getState().info.length === 0\n    const isModal = !this.opts.inline\n\n    if (\n      // If update is connected to showing the Informer - let the screen reader calmly read it.\n      isInformerHidden &&\n      // If we are in a modal - always superfocus without concern for other elements\n      // on the page (user is unlikely to want to interact with the rest of the page)\n      (isModal ||\n        // If we are already inside of Uppy, or\n        isFocusInUppy ||\n        // If we are not focused on anything BUT we have already, at least once, focused on uppy\n        //   1. We focus when isFocusNowhere, because when the element we were focused\n        //      on disappears (e.g. an overlay), - focus gets lost. If user is typing\n        //      something somewhere else on the page, - focus won't be 'nowhere'.\n        //   2. We only focus when focus is nowhere AND this.ifFocusedOnUppyRecently,\n        //      to avoid focus jumps if we do something else on the page.\n        //   [Practical check] Without '&& this.ifFocusedOnUppyRecently', in Safari, in inline mode,\n        //                     when file is uploading, - navigate via tab to the checkbox,\n        //                     try to press space multiple times. Focus will jump to Uppy.\n        (isFocusNowhere && this.ifFocusedOnUppyRecently))\n    ) {\n      this.superFocus(this.el, this.getPluginState().activeOverlayType)\n    } else {\n      this.superFocus.cancel()\n    }\n  }\n\n  readonly afterUpdate = (): void => {\n    if (this.opts.disabled && !this.dashboardIsDisabled) {\n      this.disableInteractiveElements(true)\n      return\n    }\n\n    if (!this.opts.disabled && this.dashboardIsDisabled) {\n      this.disableInteractiveElements(false)\n    }\n\n    this.superFocusOnEachUpdate()\n  }\n\n  saveFileCard = (meta: M, fileID: string): void => {\n    this.uppy.setFileMeta(fileID, meta)\n    this.toggleFileCard(false, fileID)\n  }\n\n  #attachRenderFunctionToTarget = (target: Target): TargetWithRender => {\n    const plugin = this.uppy.getPlugin(target.id) as any\n    return {\n      ...target,\n      icon: plugin.icon || this.opts.defaultPickerIcon,\n      render: plugin.render,\n    }\n  }\n\n  #isTargetSupported = (target: Target) => {\n    const plugin = this.uppy.getPlugin(target.id) as any as {\n      isSupported?: () => boolean\n    }\n    // If the plugin does not provide a `supported` check, assume the plugin works everywhere.\n    if (typeof plugin.isSupported !== 'function') {\n      return true\n    }\n    return plugin.isSupported()\n  }\n\n  #getAcquirers = memoize((targets: Target[]) => {\n    return targets\n      .filter(\n        (target) =>\n          target.type === 'acquirer' && this.#isTargetSupported(target),\n      )\n      .map(this.#attachRenderFunctionToTarget)\n  })\n\n  #getProgressIndicators = memoize((targets: Target[]) => {\n    return targets\n      .filter((target) => target.type === 'progressindicator')\n      .map(this.#attachRenderFunctionToTarget)\n  })\n\n  #getEditors = memoize((targets: Target[]) => {\n    return targets\n      .filter((target) => target.type === 'editor')\n      .map(this.#attachRenderFunctionToTarget)\n  })\n\n  render = (state: State<M, B>) => {\n    const pluginState = this.getPluginState()\n    const { files, capabilities, allowNewUpload } = state\n    const {\n      newFiles,\n      uploadStartedFiles,\n      completeFiles,\n      erroredFiles,\n      inProgressFiles,\n      inProgressNotPausedFiles,\n      processingFiles,\n\n      isUploadStarted,\n      isAllComplete,\n      isAllErrored,\n      isAllPaused,\n    } = this.uppy.getObjectOfFilesPerState()\n\n    const acquirers = this.#getAcquirers(pluginState.targets)\n    const progressindicators = this.#getProgressIndicators(pluginState.targets)\n    const editors = this.#getEditors(pluginState.targets)\n\n    let theme\n    if (this.opts.theme === 'auto') {\n      theme = capabilities.darkMode ? 'dark' : 'light'\n    } else {\n      theme = this.opts.theme\n    }\n\n    if (\n      ['files', 'folders', 'both'].indexOf(this.opts.fileManagerSelectionType) <\n      0\n    ) {\n      this.opts.fileManagerSelectionType = 'files'\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Unsupported option for \"fileManagerSelectionType\". Using default of \"${this.opts.fileManagerSelectionType}\".`,\n      )\n    }\n\n    return DashboardUI({\n      state,\n      isHidden: pluginState.isHidden,\n      files,\n      newFiles,\n      uploadStartedFiles,\n      completeFiles,\n      erroredFiles,\n      inProgressFiles,\n      inProgressNotPausedFiles,\n      processingFiles,\n      isUploadStarted,\n      isAllComplete,\n      isAllErrored,\n      isAllPaused,\n      totalFileCount: Object.keys(files).length,\n      totalProgress: state.totalProgress,\n      allowNewUpload,\n      acquirers,\n      theme,\n      disabled: this.opts.disabled,\n      disableLocalFiles: this.opts.disableLocalFiles,\n      direction: this.opts.direction,\n      activePickerPanel: pluginState.activePickerPanel,\n      showFileEditor: pluginState.showFileEditor,\n      saveFileEditor: this.saveFileEditor,\n      closeFileEditor: this.closeFileEditor,\n      disableInteractiveElements: this.disableInteractiveElements,\n      animateOpenClose: this.opts.animateOpenClose,\n      isClosing: pluginState.isClosing,\n      progressindicators,\n      editors,\n      autoProceed: this.uppy.opts.autoProceed,\n      id: this.id,\n      closeModal: this.requestCloseModal,\n      handleClickOutside: this.handleClickOutside,\n      handleInputChange: this.handleInputChange,\n      handlePaste: this.handlePaste,\n      inline: this.opts.inline,\n      showPanel: this.showPanel,\n      hideAllPanels: this.hideAllPanels,\n      i18n: this.i18n,\n      i18nArray: this.i18nArray,\n      uppy: this.uppy,\n      note: this.opts.note,\n      recoveredState: state.recoveredState,\n      metaFields: pluginState.metaFields,\n      resumableUploads: capabilities.resumableUploads || false,\n      individualCancellation: capabilities.individualCancellation,\n      isMobileDevice: capabilities.isMobileDevice,\n      fileCardFor: pluginState.fileCardFor,\n      toggleFileCard: this.toggleFileCard,\n      toggleAddFilesPanel: this.toggleAddFilesPanel,\n      showAddFilesPanel: pluginState.showAddFilesPanel,\n      saveFileCard: this.saveFileCard,\n      openFileEditor: this.openFileEditor,\n      canEditFile: this.canEditFile,\n      width: this.opts.width,\n      height: this.opts.height,\n      showLinkToFileUploadResult: this.opts.showLinkToFileUploadResult,\n      fileManagerSelectionType: this.opts.fileManagerSelectionType,\n      proudlyDisplayPoweredByUppy: this.opts.proudlyDisplayPoweredByUppy,\n      hideCancelButton: this.opts.hideCancelButton,\n      hideRetryButton: this.opts.hideRetryButton,\n      hidePauseResumeButton: this.opts.hidePauseResumeButton,\n      showRemoveButtonAfterComplete: this.opts.showRemoveButtonAfterComplete,\n      containerWidth: pluginState.containerWidth,\n      containerHeight: pluginState.containerHeight,\n      areInsidesReadyToBeVisible: pluginState.areInsidesReadyToBeVisible,\n      isTargetDOMEl: this.isTargetDOMEl,\n      parentElement: this.el,\n      allowedFileTypes: this.uppy.opts.restrictions.allowedFileTypes,\n      maxNumberOfFiles: this.uppy.opts.restrictions.maxNumberOfFiles,\n      requiredMetaFields: this.uppy.opts.restrictions.requiredMetaFields,\n      showSelectedFiles: this.opts.showSelectedFiles,\n      showNativePhotoCameraButton: this.opts.showNativePhotoCameraButton,\n      showNativeVideoCameraButton: this.opts.showNativeVideoCameraButton,\n      nativeCameraFacingMode: this.opts.nativeCameraFacingMode,\n      singleFileFullScreen: this.opts.singleFileFullScreen,\n      handleCancelRestore: this.handleCancelRestore,\n      handleRequestThumbnail: this.handleRequestThumbnail,\n      handleCancelThumbnail: this.handleCancelThumbnail,\n      // drag props\n      isDraggingOver: pluginState.isDraggingOver,\n      handleDragOver: this.handleDragOver,\n      handleDragLeave: this.handleDragLeave,\n      handleDrop: this.handleDrop,\n    })\n  }\n\n  #addSpecifiedPluginsFromOptions = () => {\n    const plugins = this.opts.plugins || []\n\n    plugins.forEach((pluginID) => {\n      const plugin = this.uppy.getPlugin(pluginID)\n      if (plugin) {\n        ;(plugin as any).mount(this, plugin)\n      } else {\n        this.uppy.log(\n          `[Uppy] Dashboard could not find plugin '${pluginID}', make sure to uppy.use() the plugins you are specifying`,\n          'warning',\n        )\n      }\n    })\n  }\n\n  #autoDiscoverPlugins = () => {\n    this.uppy.iteratePlugins(this.#addSupportedPluginIfNoTarget)\n  }\n\n  #addSupportedPluginIfNoTarget = (plugin?: UnknownPlugin<M, B>) => {\n    // Only these types belong on the Dashboard,\n    // we wouldn’t want to try and mount Compressor or Tus, for example.\n    const typesAllowed = ['acquirer', 'editor']\n    if (plugin && !plugin.opts?.target && typesAllowed.includes(plugin.type)) {\n      const pluginAlreadyAdded = this.getPluginState().targets.some(\n        (installedPlugin) => plugin.id === installedPlugin.id,\n      )\n      if (!pluginAlreadyAdded) {\n        ;(plugin as any).mount(this, plugin)\n      }\n    }\n  }\n\n  install = (): void => {\n    // Set default state for Dashboard\n    this.setPluginState({\n      isHidden: true,\n      fileCardFor: null,\n      activeOverlayType: null,\n      showAddFilesPanel: false,\n      activePickerPanel: undefined,\n      showFileEditor: false,\n      metaFields: this.opts.metaFields,\n      targets: [],\n      // We'll make them visible once .containerWidth is determined\n      areInsidesReadyToBeVisible: false,\n      isDraggingOver: false,\n    })\n\n    const { inline, closeAfterFinish } = this.opts\n    if (inline && closeAfterFinish) {\n      throw new Error(\n        '[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.',\n      )\n    }\n\n    const { allowMultipleUploads, allowMultipleUploadBatches } = this.uppy.opts\n    if (\n      (allowMultipleUploads || allowMultipleUploadBatches) &&\n      closeAfterFinish\n    ) {\n      this.uppy.log(\n        '[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true',\n        'warning',\n      )\n    }\n\n    const { target } = this.opts\n\n    if (target) {\n      this.mount(target, this)\n    }\n\n    if (!this.opts.disableStatusBar) {\n      this.uppy.use(StatusBar, {\n        id: `${this.id}:StatusBar`,\n        target: this,\n        hideUploadButton: this.opts.hideUploadButton,\n        hideRetryButton: this.opts.hideRetryButton,\n        hidePauseResumeButton: this.opts.hidePauseResumeButton,\n        hideCancelButton: this.opts.hideCancelButton,\n        showProgressDetails: this.opts.showProgressDetails,\n        hideAfterFinish: this.opts.hideProgressAfterFinish,\n        locale: this.opts.locale,\n        doneButtonHandler: this.opts.doneButtonHandler,\n      })\n    }\n\n    if (!this.opts.disableInformer) {\n      this.uppy.use(Informer, {\n        id: `${this.id}:Informer`,\n        target: this,\n      })\n    }\n\n    if (!this.opts.disableThumbnailGenerator) {\n      this.uppy.use(ThumbnailGenerator, {\n        id: `${this.id}:ThumbnailGenerator`,\n        thumbnailWidth: this.opts.thumbnailWidth,\n        thumbnailHeight: this.opts.thumbnailHeight,\n        thumbnailType: this.opts.thumbnailType,\n        waitForThumbnailsBeforeUpload: this.opts.waitForThumbnailsBeforeUpload,\n        // If we don't block on thumbnails, we can lazily generate them\n        lazy: !this.opts.waitForThumbnailsBeforeUpload,\n      })\n    }\n\n    // Dark Mode / theme\n    this.darkModeMediaQuery =\n      typeof window !== 'undefined' && window.matchMedia ?\n        window.matchMedia('(prefers-color-scheme: dark)')\n      : null\n\n    const isDarkModeOnFromTheStart =\n      this.darkModeMediaQuery ? this.darkModeMediaQuery.matches : false\n    this.uppy.log(\n      `[Dashboard] Dark mode is ${isDarkModeOnFromTheStart ? 'on' : 'off'}`,\n    )\n    this.setDarkModeCapability(isDarkModeOnFromTheStart)\n\n    if (this.opts.theme === 'auto') {\n      this.darkModeMediaQuery?.addListener(this.handleSystemDarkModeChange)\n    }\n\n    this.#addSpecifiedPluginsFromOptions()\n    this.#autoDiscoverPlugins()\n    this.initEvents()\n  }\n\n  uninstall = (): void => {\n    if (!this.opts.disableInformer) {\n      const informer = this.uppy.getPlugin(`${this.id}:Informer`)\n      // Checking if this plugin exists, in case it was removed by uppy-core\n      // before the Dashboard was.\n      if (informer) this.uppy.removePlugin(informer)\n    }\n\n    if (!this.opts.disableStatusBar) {\n      const statusBar = this.uppy.getPlugin(`${this.id}:StatusBar`)\n      if (statusBar) this.uppy.removePlugin(statusBar)\n    }\n\n    if (!this.opts.disableThumbnailGenerator) {\n      const thumbnail = this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`)\n      if (thumbnail) this.uppy.removePlugin(thumbnail)\n    }\n\n    const plugins = this.opts.plugins || []\n    plugins.forEach((pluginID) => {\n      const plugin = this.uppy.getPlugin(pluginID)\n      if (plugin) (plugin as any).unmount()\n    })\n\n    if (this.opts.theme === 'auto') {\n      this.darkModeMediaQuery?.removeListener(this.handleSystemDarkModeChange)\n    }\n\n    if (this.opts.disablePageScrollWhenModalOpen) {\n      document.body.classList.remove('uppy-Dashboard-isFixed')\n    }\n\n    this.unmount()\n    this.removeEvents()\n  }\n}\n"],"mappings":"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"}