{"version":3,"names":["h","Fragment","prettierBytes","truncateString","MetaErrorMessage","renderFileName","props","author","name","file","meta","getMaxNameLength","isSingleFile","containerHeight","containerWidth","className","title","renderAuthor","_props$file$remote","providerName","remote","dot","href","url","target","rel","renderFileSize","size","ReSelectButton","isGhost","type","onClick","toggleAddFilesPanel","i18n","ErrorButton","_ref","error","FileInfo","source","alert","toggleFileCard","metaFields"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable react/destructuring-assignment */\nimport { h, Fragment, type ComponentChild } from 'preact'\nimport prettierBytes from '@transloadit/prettier-bytes'\nimport truncateString from '@uppy/utils/lib/truncateString'\nimport MetaErrorMessage from '../MetaErrorMessage.tsx'\n\ntype $TSFixMe = any\n\nconst renderFileName = (props: $TSFixMe) => {\n  const { author, name } = props.file.meta\n\n  function getMaxNameLength() {\n    if (props.isSingleFile && props.containerHeight >= 350) {\n      return 90\n    }\n    if (props.containerWidth <= 352) {\n      return 35\n    }\n    if (props.containerWidth <= 576) {\n      return 60\n    }\n    // When `author` is present, we want to make sure\n    // the file name fits on one line so we can place\n    // the author on the second line.\n    return author ? 20 : 30\n  }\n\n  return (\n    <div className=\"uppy-Dashboard-Item-name\" title={name}>\n      {truncateString(name, getMaxNameLength())}\n    </div>\n  )\n}\n\nconst renderAuthor = (props: $TSFixMe) => {\n  const { author } = props.file.meta\n  const providerName = props.file.remote?.providerName\n  const dot = `\\u00B7`\n\n  if (!author) {\n    return null\n  }\n\n  return (\n    <div className=\"uppy-Dashboard-Item-author\">\n      <a\n        href={`${author.url}?utm_source=Companion&utm_medium=referral`}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        {truncateString(author.name, 13)}\n      </a>\n      {providerName ?\n        <>\n          {` ${dot} `}\n          {providerName}\n          {` ${dot} `}\n        </>\n      : null}\n    </div>\n  )\n}\n\nconst renderFileSize = (props: $TSFixMe) =>\n  props.file.size && (\n    <div className=\"uppy-Dashboard-Item-statusSize\">\n      {prettierBytes(props.file.size)}\n    </div>\n  )\n\nconst ReSelectButton = (props: $TSFixMe) =>\n  props.file.isGhost && (\n    <span>\n      {' \\u2022 '}\n      <button\n        className=\"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect\"\n        type=\"button\"\n        onClick={props.toggleAddFilesPanel}\n      >\n        {props.i18n('reSelect')}\n      </button>\n    </span>\n  )\n\nconst ErrorButton = ({ file, onClick }: $TSFixMe) => {\n  if (file.error) {\n    return (\n      <button\n        className=\"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails\"\n        aria-label={file.error}\n        data-microtip-position=\"bottom\"\n        data-microtip-size=\"medium\"\n        onClick={onClick}\n        type=\"button\"\n      >\n        ?\n      </button>\n    )\n  }\n  return null\n}\n\nexport default function FileInfo(props: $TSFixMe): ComponentChild {\n  const { file } = props\n  return (\n    <div\n      className=\"uppy-Dashboard-Item-fileInfo\"\n      data-uppy-file-source={file.source}\n    >\n      <div className=\"uppy-Dashboard-Item-fileName\">\n        {renderFileName(props)}\n        <ErrorButton\n          file={props.file}\n          // eslint-disable-next-line no-alert\n          onClick={() => alert(props.file.error)} // TODO: move to a custom alert implementation\n        />\n      </div>\n      <div className=\"uppy-Dashboard-Item-status\">\n        {renderAuthor(props)}\n        {renderFileSize(props)}\n        {ReSelectButton(props)}\n      </div>\n      <MetaErrorMessage\n        file={props.file}\n        i18n={props.i18n}\n        toggleFileCard={props.toggleFileCard}\n        metaFields={props.metaFields}\n      />\n    </div>\n  )\n}\n"],"mappings":"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"}