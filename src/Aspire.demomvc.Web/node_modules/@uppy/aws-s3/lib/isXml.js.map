{"version":3,"names":["removeMimeParameters","mimeType","replace","isXml","content","xhr","rawContentType","headers","getResponseHeader","contentType","toLowerCase","test"],"sources":["isXml.js"],"sourcesContent":["/**\n * Remove parameters like `charset=utf-8` from the end of a mime type string.\n *\n * @param {string} mimeType - The mime type string that may have optional parameters.\n * @returns {string} The \"base\" mime type, i.e. only 'category/type'.\n */\nfunction removeMimeParameters (mimeType) {\n  return mimeType.replace(/;.*$/, '')\n}\n\n/**\n * Check if a response contains XML based on the response object and its text content.\n *\n * @param {string} content - The text body of the response.\n * @param {object|XMLHttpRequest} xhr - The XHR object or response object from Companion.\n * @returns {bool} Whether the content is (probably) XML.\n */\nfunction isXml (content, xhr) {\n  const rawContentType = (xhr.headers ? xhr.headers['content-type'] : xhr.getResponseHeader('Content-Type'))\n\n  if (typeof rawContentType === 'string') {\n    const contentType = removeMimeParameters(rawContentType).toLowerCase()\n    if (contentType === 'application/xml' || contentType === 'text/xml') {\n      return true\n    }\n    // GCS uses text/html for some reason\n    // https://github.com/transloadit/uppy/issues/896\n    if (contentType === 'text/html' && /^<\\?xml /.test(content)) {\n      return true\n    }\n  }\n  return false\n}\n\nexport default isXml\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,oBAAoBA,CAAEC,QAAQ,EAAE;EACvC,OAAOA,QAAQ,CAACC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;AACrC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,KAAKA,CAAEC,OAAO,EAAEC,GAAG,EAAE;EAC5B,MAAMC,cAAc,GAAID,GAAG,CAACE,OAAO,GAAGF,GAAG,CAACE,OAAO,CAAC,cAAc,CAAC,GAAGF,GAAG,CAACG,iBAAiB,CAAC,cAAc,CAAE;EAE1G,IAAI,OAAOF,cAAc,KAAK,QAAQ,EAAE;IACtC,MAAMG,WAAW,GAAGT,oBAAoB,CAACM,cAAc,CAAC,CAACI,WAAW,CAAC,CAAC;IACtE,IAAID,WAAW,KAAK,iBAAiB,IAAIA,WAAW,KAAK,UAAU,EAAE;MACnE,OAAO,IAAI;IACb;IACA;IACA;IACA,IAAIA,WAAW,KAAK,WAAW,IAAI,UAAU,CAACE,IAAI,CAACP,OAAO,CAAC,EAAE;MAC3D,OAAO,IAAI;IACb;EACF;EACA,OAAO,KAAK;AACd;AAEA,eAAeD,KAAK"}